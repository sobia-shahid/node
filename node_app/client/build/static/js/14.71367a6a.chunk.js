(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[14],{1235:function(e,t,a){e.exports=a.p+"static/media/nathan-anderson-kujXUuh1X0o-unsplash.4f641ac6.jpg"},1236:function(e,t,a){},1340:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return J}));var n=a(137),r=a(25),o=a(0),c=a.n(o),l=a(28),s=a.n(l),i=a(50),u=a(57),d=a(608),m=a(1235),p=a.n(m),b=a(829),g=a.n(b),h=(a(1236),a(621)),f=a(893),O="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),v=new Uint8Array(16);function E(){if(!O)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(v)}var j=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var y=function(e){return"string"===typeof e&&j.test(e)},w=[],S=0;S<256;++S)w.push((S+256).toString(16).substr(1));var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase();if(!y(a))throw TypeError("Stringified UUID is invalid");return a};var C=function(e,t,a){var n=(e=e||{}).random||(e.rng||E)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var r=0;r<16;++r)t[a+r]=n[r];return t}return F(n)},N=(a(892),a(236)),x=a(199),k=a(243),D=a(207),I=a(239),P=a(187),_=a(1304),T=a(1305),B=a(1299),z=a(1300),A=a(1303),U=a(329),R=a(628),Y=a(648),q=a(586),H=a(731),L=a(138),M=a(26);function V(){var e=Object(n.a)(["\n  .container-row {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    margin-bottom: 2rem;\n    margin-top: 4rem;\n  }\n\n  .checks {\n    justify-self: center;\n  }\n"]);return V=function(){return e},e}var W=Y.a().shape({title:Y.c().required("Required").min(5).max(22),description:Y.c().required("Required").min(5).max(170),passwordo:Y.c()});function J(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],l=Object(o.useState)(!0),m=Object(r.a)(l,2),b=m[0],O=m[1],v=Object(o.useState)(!1),E=Object(r.a)(v,2),j=E[0],y=E[1],w=Object(o.useState)(!1),S=Object(r.a)(w,2),F=S[0],Y=S[1],L=Object(o.useState)(null),V=Object(r.a)(L,2),J=V[0],X=V[1];var $=function(){var e=Object(o.useState)(0),t=Object(r.a)(e,2),a=(t[0],t[1]);return function(){return a((function(e){return++e}))}}(),K={cloudName:"dx1zby8rs",uploadPreset:"uploaded_from_react",thumbnailTransformation:[{width:600,height:400,crop:"limit"}],sources:["local"],styles:{palette:{window:"#F5F5F5",sourceBg:"#FFFFFF",windowBorder:"#0ca8fd",tabIcon:"#0094c7",inactiveTabIcon:"#69778A",menuIcons:"#0094C7",link:"#0ca8fd",action:"#F5F5F5",inProgress:"#0194c7",complete:"#53ad9d",error:"#c43737",textDark:"#000000",textLight:"#FFFFFF"}},maxFiles:59999999,showDoneButton:!1,maxImageFileSize:7e6,inlineContainer:"#threeWidget",singleUploadAutoClose:!1,return_delete_token:!0,text:{en:{menu:{files:"UPLOAD 360 IMAGES"},queue:{done:""},local:{dd_title_single:"Drag and Drop 360 images here",dd_title_multi:"Drag and Drop 360 images here",drop_title_single:"Drag and Drop 360 images here",drop_title_multiple:"Drag and Drop 360 images here"}}}},Q={cloudName:"dx1zby8rs",uploadPreset:"uploaded_from_react",sources:["local"],styles:{palette:{window:"#F5F5F5",sourceBg:"#FFFFFF",windowBorder:"#c0c0c0",tabIcon:"#0094c7",inactiveTabIcon:"#69778A",menuIcons:"#0094C7",link:"#0ca8fd",action:"#F5F5F5",inProgress:"#0194c7",complete:"#53ad9d",error:"#c43737",textDark:"#000000",textLight:"#FFFFFF"}},maxFiles:1,maxImageFileSize:7e6,singleUploadAutoClose:!0},Z=function(){window.cloudinary.createUploadWidget(Q,(function(e,t){e?console.log(t):console.log("he"),e?console.log("error.status"):console.log("non"),console.log(t.event),!e&&t&&"queues-end"===t.event&&(console.log(t.event),console.log(t.info.files[0]),null!=t.info.files[0].uploadInfo&&X(t.info.files[0]),$(),console.log(J))})).open()};Object(o.useEffect)((function(){var e=window.cloudinary.createUploadWidget(K,(function(t,a){t?console.log(a.status):console.log("no"),t?f.b.error("".concat(a.name," ").concat(t.status),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):console.log("no"),!t&&a&&"source-changed"===a.event&&O(!1),!t&&a&&"success"===a.event?(vt.push(a.info),$()):!t&&a&&"queues-end"===a.event&&(n(!0),e.close(),y(!0),O(!0)),console.log(t),console.log(a)}));e.open()}),[]),Object(o.useEffect)((function(){if(1==j){["a","b","c","d","e","f","g"].map((function(e){(e=window.cloudinary.createUploadWidget(K,(function(t,a){t?f.b.error("".concat(a.name," ").concat(t.status),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):console.log("no"),!t&&a&&"source-changed"===a.event&&O(!1),!t&&a&&"success"===a.event?(vt.push(a.info),$()):!t&&a&&"queues-end"===a.event&&(n(!0),e.close(),Y(!0))}))).open()})),O(!0),y(!1),Y(!0)}else if(1==F){["a","b","c","d","e","f","g","h"].map((function(e){(e=window.cloudinary.createUploadWidget(K,(function(t,a){t?f.b.error("".concat(a.name," ").concat(t.status),{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):console.log("no"),!t&&a&&"source-changed"===a.event&&O(!1),!t&&a&&"success"===a.event?(vt.push(a.info),$()):!t&&a&&"queues-end"===a.event&&(n(!0),e.close())}))).open()})),Y(!1)}}));var ee,te=Object(i.f)(),ae=C(),ne=C(),re=c.a.useContext(u.a).user,oe=new Date,ce=g()(oe).format("YYYY-MM-DD HH:mm:ss"),le=new Date,se=g()(le).format("YYYY-MM-DD HH:mm:ss"),ie=Object(o.useState)(!0),ue=Object(r.a)(ie,2),de=ue[0],me=ue[1],pe=Object(o.useState)(""),be=Object(r.a)(pe,2),ge=(be[0],be[1],Object(o.useState)("")),he=Object(r.a)(ge,2),fe=(he[0],he[1],Object(o.useState)(null)),Oe=Object(r.a)(fe,2),ve=(Oe[0],Oe[1],Object(o.useState)(null)),Ee=Object(r.a)(ve,2),je=Ee[0],ye=(Ee[1],Object(o.useState)(null)),we=Object(r.a)(ye,2),Se=(we[0],we[1],Object(o.useState)(re.user._id)),Fe=Object(r.a)(Se,2),Ce=Fe[0],Ne=(Fe[1],Object(o.useState)(ce)),xe=Object(r.a)(Ne,2),ke=xe[0],De=(xe[1],Object(o.useState)(se)),Ie=Object(r.a)(De,2),Pe=Ie[0],_e=(Ie[1],Object(o.useState)(!1)),Te=Object(r.a)(_e,2),Be=Te[0],ze=Te[1],Ae=Object(o.useState)(""),Ue=Object(r.a)(Ae,2),Re=(Ue[0],Ue[1],Object(o.useState)(!0)),Ye=Object(r.a)(Re,2),qe=Ye[0],He=Ye[1],Le=Object(o.useState)(!1),Me=Object(r.a)(Le,2),Ve=Me[0],We=Me[1],Je=Object(o.useState)(!0),Ge=Object(r.a)(Je,2),Xe=Ge[0],$e=(Ge[1],Object(o.useState)(!0)),Ke=Object(r.a)($e,2),Qe=Ke[0],Ze=(Ke[1],Object(o.useState)("70000")),et=Object(r.a)(Ze,2),tt=et[0],at=(et[1],Object(o.useState)(!1)),nt=Object(r.a)(at,2),rt=nt[0],ot=(nt[1],Object(o.useState)(!0)),ct=Object(r.a)(ot,2),lt=ct[0],st=(ct[1],Object(o.useState)("normal")),it=Object(r.a)(st,2),ut=it[0],dt=(it[1],Object(o.useState)("0.6")),mt=Object(r.a)(dt,2),pt=mt[0],bt=(mt[1],Object(o.useState)(!1)),gt=Object(r.a)(bt,2),ht=gt[0],ft=(gt[1],Object(o.useState)([])),Ot=Object(r.a)(ft,2),vt=Ot[0],Et=(Ot[1],Object(o.useState)(!1)),jt=Object(r.a)(Et,2),yt=jt[0],wt=(jt[1],Object(o.useState)("http://localhost:3000/static/media/play-button.ee47c8c5.png")),St=Object(r.a)(wt,2),Ft=St[0],Ct=(St[1],Object(o.useState)(!1)),Nt=Object(r.a)(Ct,2),xt=Nt[0],kt=(Nt[1],Object(o.useState)("0.3")),Dt=Object(r.a)(kt,2),It=Dt[0],Pt=(Dt[1],Object(o.useState)("tourShadow")),_t=Object(r.a)(Pt,2),Tt=_t[0],Bt=(_t[1],Object(o.useState)(!1)),zt=Object(r.a)(Bt,2),At=zt[0],Ut=(zt[1],Object(o.useState)("Line1")),Rt=Object(r.a)(Ut,2),Yt=Rt[0],qt=(Rt[1],Object(o.useState)(!1)),Ht=Object(r.a)(qt,2),Lt=Ht[0],Mt=(Ht[1],Object(o.useState)("small-image-button")),Vt=Object(r.a)(Mt,2),Wt=Vt[0],Jt=(Vt[1],Object(o.useState)(re.user.email)),Gt=Object(r.a)(Jt,2),Xt=Gt[0],$t=(Gt[1],Object(o.useState)(re.user.name)),Kt=Object(r.a)($t,2),Qt=Kt[0],Zt=(Kt[1],Object(o.useState)(re.user.image)),ea=Object(r.a)(Zt,2),ta=ea[0];ea[1];return c.a.createElement("div",{className:"form-cont"},c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),c.a.createElement(q.a,{breadCrumbTitle:"Add Your 360 Tour ",breadCrumbParent:"Dashboard",breadCrumbActive:"Add Your 360 Tour"}),de?c.a.createElement(_.a,null,c.a.createElement(T.a,{className:"m-2 "},c.a.createElement(R.c,{initialValues:{title:"",description:"",passwordo:""},validationSchema:W,onSubmit:function(e,t){console.log("click"),console.log(e),function(e,t,a){var n=vt.map((function(e){var t=e;return t.url=e.url.replace("upload/","upload/c_limit,w_0.69/"),t}));me(!1);var r=new FormData;r.append("title",e),r.append("description",t),r.append("userId",Ce),r.append("featured",JSON.stringify(J)),r.append("threesixty",je),r.append("time",ke),r.append("lastEdit",Pe),r.append("havePassword",Be),r.append("passwordo",a),r.append("publish",qe),r.append("useit",Ve),r.append("rotation",Xe),r.append("rotationEdit",Qe),r.append("rotationSpeed",tt),r.append("openDescription",rt),r.append("loop",lt),r.append("direction",ut),r.append("zoom",pt),r.append("pause",ht),r.append("showImageFeaturedInPause",yt),r.append("playicon",Ft),r.append("disTourTitle",xt),r.append("pauseOpacity",It),r.append("cssTourTitle",Tt),r.append("EnableLine",At),r.append("LineTitle",Yt),r.append("openCarousel",Lt),r.append("carouselDesing",Wt),r.append("imgsData",JSON.stringify(n)),r.append("email",Xt),r.append("tourCreator",Qt),r.append("imageUser",ta),r.append("uuid1",ae),r.append("uuid2",ne),r.append("hotSpots","[]"),r.append("transitionEffect",JSON.stringify({type:M.y[0],duration:M.x[0]}));console.log(r),s.a.post("/api/places/add",r,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e),te.push("/VirtualTour"),window.location.reload()})).catch((function(e){return console.log(e)})),s.a.post("/api/counter/",{uuid1:ae}).then((function(e){console.log(e.data)})),s.a.post("/api/like/",{uuid2:ne}).then((function(e){console.log(e.data)}))}(e.title,e.description,e.passwordo)}},(function(e){return c.a.createElement(R.b,null,c.a.createElement(B.a,{className:"has-icon-left form-label-group position-relative"},c.a.createElement(R.a,{name:"title",id:"nameFloatingIcons",placeholder:"360 tour title",value:e.values.title,onChange:e.handleChange("title"),onBlur:e.handleBlur("title"),className:"form-control"}),c.a.createElement("div",{className:"form-control-position"},c.a.createElement(N.a,{size:20})),c.a.createElement(z.a,{for:"title"},"Title"),c.a.createElement("div",{style:{color:"red"}},e.touched.title&&e.errors.title)),c.a.createElement(B.a,{className:"has-icon-left form-label-group position-relative"},c.a.createElement(A.a,{type:"textarea",name:"text",id:"Description",rows:"5",placeholder:"360 tour descrition",value:e.values.description,onChange:e.handleChange("description"),onBlur:e.handleBlur("description"),className:"form-control"}),c.a.createElement("div",{className:"form-control-position"},c.a.createElement(x.a,{size:20})),c.a.createElement(z.a,{for:"description"},"Description"),c.a.createElement("div",{style:{color:"red"}},e.touched.description&&e.errors.description)),c.a.createElement(B.a,null,c.a.createElement("div",{className:"featured-image-parent"},c.a.createElement("div",{className:"featured-image",style:{backgroundImage:"url(".concat(null!=J&&J?J.uploadInfo.url:p.a,")")}}),c.a.createElement("div",{className:"featured-image-overlay"}),c.a.createElement("div",{style:{zIndex:"3"}},c.a.createElement(U.a.Ripple,{className:"mr-1 mb-1 bg-gradient-primary",color:"none",size:"lg",onClick:Z},"UPLOAD FEATURED IMAGE")))),c.a.createElement(B.a,null,c.a.createElement("div",{className:"cloud-container"},c.a.createElement("div",{id:"threeWidget"}),1==b?c.a.createElement(h.a,null):null),c.a.createElement("div",{className:"thumbnail-images"},vt.map((function(e){return c.a.createElement("div",{className:"postedImgs",onClick:function(){vt.splice(vt.findIndex((function(t){return t.asset_id==e.asset_id})),1),vt.length<1&&n(!1),$()},key:e.asset_id},c.a.createElement("img",{src:e.thumbnail_url}),c.a.createElement("div",{className:"x"},c.a.createElement(k.a,{size:30})))})))),c.a.createElement("hr",null),c.a.createElement(G,null,c.a.createElement("div",{className:"container-row"},c.a.createElement("div",{className:"checks"},c.a.createElement(B.a,null,c.a.createElement(z.a,{for:"customFile",className:"mb-1"},"Enable password for the virtual tour"," "),c.a.createElement(H.a,{color:"primary",checked:Be,onChange:function(e){return ze(e.target.checked)},icon:c.a.createElement(D.a,{className:"vx-icon",size:16}),label:"Password"}))),c.a.createElement("div",{className:"checks"},c.a.createElement(B.a,null,c.a.createElement(z.a,{for:"customFile",className:"mb-1"},"Make your tour publish on Walkin"," "),c.a.createElement(H.a,{color:"primary",checked:qe,onChange:function(e){return He(e.target.checked)},icon:c.a.createElement(I.a,{className:"vx-icon",size:16}),label:"Publish"}))),c.a.createElement("div",{className:"checks"},c.a.createElement(B.a,null,c.a.createElement(z.a,{for:"customFile",className:"mb-1"},"May users user your 360 picutres ?"),c.a.createElement(H.a,{color:"primary",checked:Ve,onChange:function(e){return We(e.target.checked)},icon:c.a.createElement(P.a,{className:"vx-icon",size:16}),label:"I accept"}))))),Be?c.a.createElement(B.a,{className:"has-icon-left form-label-group position-relative"},c.a.createElement(R.a,{name:"title",id:"nameFloatingIcons",placeholder:"Insert the password to protect you tour",value:e.values.passwordo,onChange:e.handleChange("passwordo"),onBlur:e.handleBlur("passwordo"),className:"form-control"}),c.a.createElement("div",{className:"form-control-position"},c.a.createElement(D.a,{size:20})),c.a.createElement(z.a,{for:"title"},"Title"),c.a.createElement("div",{style:{color:"red"}},e.touched.passwordo&&e.errors.passwordo)):"",c.a.createElement(U.a.Ripple,{color:"primary",type:"submit",onClick:e.handleSubmit,className:"".concat(null!=J&&1==a?"proceed":"pending")},"Submit"))})))):c.a.createElement(_.a,null,c.a.createElement(T.a,{className:"m-2 "},c.a.createElement(d.a,Object.assign({speed:2,width:476,height:400,viewBox:"0 0 476 400",backgroundColor:"#0ca8fd",foregroundColor:"#ecebeb"},ee),c.a.createElement("rect",{x:"48",y:"8",rx:"3",ry:"3",width:"88",height:"6"}),c.a.createElement("rect",{x:"48",y:"26",rx:"3",ry:"3",width:"52",height:"6"}),c.a.createElement("rect",{x:"0",y:"56",rx:"3",ry:"3",width:"410",height:"6"}),c.a.createElement("rect",{x:"0",y:"72",rx:"3",ry:"3",width:"380",height:"6"}),c.a.createElement("rect",{x:"0",y:"88",rx:"3",ry:"3",width:"178",height:"6"}),c.a.createElement("circle",{cx:"20",cy:"20",r:"20"}))))))}var G=L.b.div(V())},586:function(e,t,a){"use strict";var n=a(11),r=a(12),o=a(13),c=a(14),l=a(0),s=a.n(l),i=a(1315),u=a(1316),d=a(153),m=a(30),p=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"content-header row"},s.a.createElement("div",{className:"content-header-left col-md-9 col-12 mb-2"},s.a.createElement("div",{className:"row breadcrumbs-top"},s.a.createElement("div",{className:"breadcrumb-wrapper vx-breadcrumbs d-sm-block d-none col-12"},s.a.createElement(i.a,{tag:"ol"},s.a.createElement(u.a,{tag:"li"},s.a.createElement(m.b,{to:"/pages/HomePage"},s.a.createElement(d.a,{className:"align-top",size:20}))),s.a.createElement(u.a,{tag:"li",className:"text-primary"},this.props.breadCrumbParent),this.props.breadCrumbParent2?s.a.createElement(u.a,{tag:"li",className:"text-primary"},this.props.breadCrumbParent2):"",this.props.breadCrumbParent3?s.a.createElement(u.a,{tag:"li",className:"text-primary"},this.props.breadCrumbParent3):"",s.a.createElement(u.a,{tag:"li",active:!0},this.props.breadCrumbActive))))),s.a.createElement("div",{className:"content-header-right text-md-right col-md-3 col-12 d-md-block d-none"}))}}]),a}(s.a.Component);t.a=p}}]);
//# sourceMappingURL=14.71367a6a.chunk.js.map